# Declare a variable for the compliler which we are going to use
CP=g++
# Declare another variable with the flags which we are going to use
CPFLAGS=-g -Wall -std=c++11 -pthread 

CC=gcc
CFLAGS=-g -Wall -std=c99 -pthread 

OBJDIR=build

default: test_graph test_server test_utils test_vector

test_server: init graphutils.o
	$(CP) $(CPFLAGS) test_server.cpp -o $(OBJDIR)/test_server

test_graph: test.o
	$(CP) $(CPFLAGS) -o $(OBJDIR)/test_graph $(OBJDIR)/test.o $(OBJDIR)/graph.o $(OBJDIR)/graphfiles.o 

test_vector: init graphutils.o graphutils.h
	$(CP) $(CPFLAGS) test_vector.cpp -o $(OBJDIR)/test_vector $(OBJDIR)/graphutils.o

test_utils: init graphutils.o graphutils.h
	$(CP) $(CPFLAGS) test_utils.cpp -o $(OBJDIR)/test_utils $(OBJDIR)/graphutils.o 

test.o: graphfiles.o
	$(CP) $(CPFLAGS) -c test.cpp -o $(OBJDIR)/test.o

graphfiles.o: graph.o graphfiles.h
	$(CP) $(CPFLAGS) -c graphfiles.cpp -o $(OBJDIR)/graphfiles.o

graphutils.o: primitives.h graphutils.h
	$(CP) $(CPFLAGS) -c graphutils.cpp -o $(OBJDIR)/graphutils.o

graph.o: init primitives.h graph.h
	$(CP) $(CPFLAGS) -c graph.cpp -o $(OBJDIR)/graph.o


init: 
	- mkdir -p $(OBJDIR)


clean:
	- rm -rf $(OBJDIR)

