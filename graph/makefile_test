# Declare a variable for the compliler which we are going to use
CP=g++
# Declare another variable with the flags which we are going to use
CPFLAGS=-g -Wall -std=c++11 -pthread 

CC=gcc
CFLAGS=-g -Wall -std=c99 -pthread 

OBJDIR=build

default: graph_test

graph_test: graph.o serializer.o test.o
	$(CP) $(CPFLAGS) -o $(OBJDIR)/graph_test $(OBJDIR)/test.o $(OBJDIR)/serializer.o $(OBJDIR)/graph.o 

test.o: init primitives.h graphutils.h test.c graph.h
	$(CC) $(CFLAGS) -c test.c -o $(OBJDIR)/test.o

serializer.o: init primitives.h graph.c serializer.h
	$(CP) $(CPFLAGS) -c serializer.cpp -o $(OBJDIR)/serializer.o

graph.o: init primitives.h graphutils.h graph.c graph.h
	$(CC) $(CFLAGS) -c graph.c -o $(OBJDIR)/graph.o


init: 
	- mkdir -p $(OBJDIR)


clean:
	- rm -rf $(OBJDIR)

